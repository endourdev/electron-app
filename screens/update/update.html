<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mise à jour</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* subtle animated stripe for the fill */
      @keyframes stripe {
        from { background-position: 0 0; }
        to { background-position: 40px 0; }
      }
      .progress-fill {
        background-image: linear-gradient(45deg, rgba(255,255,255,0.06) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.06) 50%, rgba(255,255,255,0.06) 75%, transparent 75%, transparent);
        background-size: 40px 40px;
        animation: stripe 1s linear infinite;
      }
    </style>
  </head>
  <body class="min-h-screen bg-[#0f1724] flex items-center justify-center">
    <div class="w-full max-w-2xl px-6">
      <div class="bg-[#0b1020] rounded-2xl border border-[#1f2937] shadow-2xl overflow-hidden">
        <div class="p-6 flex gap-4 items-start">
          <div class="flex-shrink-0 mt-1">
            <div class="w-16 h-16 rounded-xl bg-gradient-to-br from-[#5865f2] to-[#6e5ef8] flex items-center justify-center shadow-lg">
              <!-- Discord-style glyph -->
              <svg class="w-8 h-8 text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 9.5c.8 0 1.45.725 1.45 1.6 0 .875-.65 1.6-1.45 1.6-.8 0-1.45-.725-1.45-1.6 0-.875.65-1.6 1.45-1.6zM16.5 9.5c.8 0 1.45.725 1.45 1.6 0 .875-.65 1.6-1.45 1.6-.8 0-1.45-.725-1.45-1.6 0-.875.65-1.6 1.45-1.6z" fill="white"/><path d="M21 5s-1.5-1.5-4.5-1.5c0 0-1 0-2 1-1-1-2-1-2-1C6.5 3.5 5 5 5 5S3 7 3 11.5V17c0 0 2 3 9 3s9-3 9-3v-5.5C21 7 21 5 21 5z" stroke="rgba(255,255,255,0.12)" stroke-width="0.5"/></svg>
            </div>
          </div>
          <div class="flex-1">
            <div class="flex items-center justify-between">
              <div>
                <h2 id="title" class="text-white text-xl font-semibold">Mise à jour disponible</h2>
                <p id="updateMessage" class="text-slate-300 text-sm mt-1">Nous vérifions et téléchargeons la dernière version.</p>
              </div>
              <div class="text-right text-slate-400 text-sm mt-1" id="version">v{version}</div>
            </div>

            <div class="mt-6">
              <div class="w-full bg-white/5 rounded-full h-3 overflow-hidden">
                <div id="progressFill" class="h-3 rounded-full w-0 bg-gradient-to-r from-[#5865f2] via-[#8b5cf6] to-[#f472b6] progress-fill"></div>
              </div>
              <div class="mt-3 flex items-center justify-between">
                <div class="text-slate-400 text-sm" id="progressText">0%</div>
                <div class="text-slate-500 text-xs">Téléchargement en cours</div>
              </div>
            </div>

            <div class="mt-6 bg-[#020617] border border-[#111827] rounded-lg p-3 text-slate-300 text-sm max-h-32 overflow-auto">
              <strong class="block text-white text-sm mb-2">Changelog</strong>
              <ul id="changelog" class="space-y-1">
                <li>• Préparation de la mise à jour...</li>
              </ul>
            </div>

            <div class="mt-6 flex items-center justify-end gap-3">
              <button id="laterBtn" class="px-4 py-2 bg-transparent border border-white/6 text-slate-300 rounded-lg hover:bg-white/2">Plus tard</button>
              <button id="installBtn" disabled class="px-4 py-2 bg-[#5865f2] text-white rounded-lg hover:bg-[#4851d9] disabled:opacity-60 flex items-center gap-2">
                <svg id="btnSpinner" class="w-4 h-4 text-white hidden" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 12a9 9 0 11-9-9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <span id="installText">Installer et redémarrer</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script defer src="./updateView.js"></script>
  </body>
</html>
